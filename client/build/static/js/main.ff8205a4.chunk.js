(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(24),s=n.n(r),a=(n(73),n(74),n(3)),i=n(18),j=n.n(i),o=n(1),l=Object(c.createContext)();function u(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(null),u=Object(a.a)(i,2),b=u[0],d=u[1],O=Object(c.useState)(!0),h=Object(a.a)(O,2),x=h[0],g=h[1],m=Object(c.useState)(null),v=Object(a.a)(m,2),p=v[0],f=v[1],C=Object(c.useState)(null),S=Object(a.a)(C,2),y=(S[0],S[1]),L=function(){var e=localStorage.getItem("authToken");y({Authorization:"Bearer ".concat(e)}),e?j.a.get("/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var t=e.data;d(t),s(!0),g(!1)})).catch((function(e){d(null),s(!1),g(!1)})):g(!1)};return Object(c.useEffect)((function(){L()}),[]),Object(o.jsx)(l.Provider,{value:{isLoggedIn:r,user:b,isLoading:x,errMessage:p,loginUser:function(e){localStorage.setItem("authToken",e),L()},setErrMessage:f,logoutUser:function(){localStorage.removeItem("authToken"),s(!1),d(null)}},children:e.children})}var b=n(7);function d(){var e=Object(c.useContext)(l).isLoggedIn;return Object(o.jsxs)("div",{className:"footer",children:[Object(o.jsx)("p",{children:"\xa9 box"}),!e&&Object(o.jsx)(b.b,{to:"/admin/login",children:Object(o.jsx)("p",{children:"Log in as admin"})})]})}var O=n(6),h=(n(94),n(38)),x=n(67),g=n(15),m=n(11);function v(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(h.a.Collapse,{className:"justify-content-end",children:Object(o.jsxs)(g.a,{children:[Object(o.jsx)(g.a.Item,{children:Object(o.jsx)(b.b,{to:"/customer/signup",children:"Sign up"})}),Object(o.jsxs)(m.a,{title:"Login",children:[Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/customer/login",children:"Log in for Customer"})}),Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/driver/login",children:"Log in for Driver"})})]})]})})})}function p(){var e=Object(c.useContext)(l).logoutUser;return Object(o.jsx)(h.a.Collapse,{className:"justify-content-end",children:Object(o.jsx)(g.a,{children:Object(o.jsx)(g.a.Item,{children:Object(o.jsx)(b.b,{to:"/",onClick:function(){e()},children:"Sign out"})})})})}function f(){return Object(o.jsxs)(g.a,{children:[Object(o.jsxs)(m.a,{title:"Driver",children:[Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/admin/driver/create",children:"Create"})}),Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/admin/driver",children:"List all driver"})})]}),Object(o.jsx)(g.a.Item,{children:Object(o.jsx)(b.b,{to:"/admin/orders",children:"Manage Order"})})]})}function C(){return Object(o.jsxs)(g.a,{children:[Object(o.jsx)(g.a.Item,{children:Object(o.jsx)(b.b,{to:"/driver/delivery",children:"Show delivery"})}),Object(o.jsxs)(m.a,{title:"Manage profile",children:[Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/driver/edit",children:"Edit profile"})}),Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/driver/password",children:"Change password"})})]})]})}function S(){return Object(o.jsxs)(g.a,{children:[Object(o.jsxs)(m.a,{title:"Order",children:[Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/customer/order/create",children:"Create Order"})}),Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/customer/orders",children:"Show all orders"})})]}),Object(o.jsxs)(m.a,{title:"Manage profile",children:[Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/customer/edit",children:"Edit profile"})}),Object(o.jsx)(m.a.Item,{children:Object(o.jsx)(b.b,{to:"/customer/password",children:"Change password"})})]})]})}function y(){var e=Object(c.useContext)(l),t=e.isLoggedIn,n=e.user;return Object(o.jsxs)(x.a,{className:"d-flex",children:[Object(o.jsx)(b.b,{to:"/",children:Object(o.jsx)("img",{className:".logo",src:"/logo.png",alt:"Logo",height:"50px"})}),Object(o.jsxs)(h.a,{className:"navbar-link col-11",children:["customer"===(null===n||void 0===n?void 0:n.userType)&&Object(o.jsx)(S,{}),"driver"===(null===n||void 0===n?void 0:n.userType)&&Object(o.jsx)(C,{}),"admin"===(null===n||void 0===n?void 0:n.userType)&&Object(o.jsx)(f,{}),t?Object(o.jsx)(p,{}):Object(o.jsx)(v,{})]})]})}function L(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{children:"Welcome to box"})})}function w(e){var t=e.children,n=e.redirectTo,r=Object(c.useContext)(l),s=r.isLoggedIn,a=r.isLoading,i=r.user;return a?Object(o.jsx)("p",{children:"Loading..."}):s&&"admin"===(null===i||void 0===i?void 0:i.userType)?t:Object(o.jsx)(O.a,{to:n})}function I(e){var t=e.children,n=e.redirectTo,r=Object(c.useContext)(l),s=r.isLoggedIn,a=r.isLoading,i=r.user;return a?Object(o.jsx)("p",{children:"Loading..."}):s&&"driver"===(null===i||void 0===i?void 0:i.userType)?t:Object(o.jsx)(O.a,{to:n})}function T(e){var t=e.children,n=e.redirectTo,r=Object(c.useContext)(l),s=r.isLoggedIn,a=r.isLoading,i=r.user;return a?Object(o.jsx)("p",{children:"Loading..."}):s&&"customer"===(null===i||void 0===i?void 0:i.userType)?t:Object(o.jsx)(O.a,{to:n})}function N(e){var t=e.children,n=Object(c.useContext)(l),r=n.isLoggedIn,s=n.isLoading,a=n.user;return s?Object(o.jsx)("p",{children:"Loading..."}):r?"admin"===(null===a||void 0===a?void 0:a.userType)?Object(o.jsx)(O.a,{to:"/admin"}):"driver"===(null===a||void 0===a?void 0:a.userType)?Object(o.jsx)(O.a,{to:"/driver"}):"customer"===(null===a||void 0===a?void 0:a.userType)?Object(o.jsx)(O.a,{to:"/customer"}):void 0:t}function P(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(a.a)(s,2),u=i[0],b=i[1],d=Object(O.g)(),h=Object(c.useContext)(l),x=(h.isLoggedIn,h.loginUser),g=h.setErrMessage;return Object(o.jsx)("div",{className:"admin-login",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={username:n,password:u};j.a.post("/login/admin",t).then((function(e){var t=e.data.authToken;x(t),d("/admin")})).catch((function(e){g(e.response.data.message)}))},children:[Object(o.jsxs)("label",{children:["Username",Object(o.jsx)("input",{type:"text",value:n,placeholder:"Username",onChange:function(e){return r(e.target.value)}})]}),Object(o.jsxs)("label",{children:["Password",Object(o.jsx)("input",{type:"password",value:u,placeholder:"Password",onChange:function(e){return b(e.target.value)}})]}),Object(o.jsx)("button",{children:"Submit"})]})})}function E(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(a.a)(s,2),u=i[0],b=i[1],d=Object(c.useState)(""),h=Object(a.a)(d,2),x=h[0],g=h[1],m=Object(c.useState)(""),v=Object(a.a)(m,2),p=v[0],f=v[1],C=Object(c.useContext)(l).setErrMessage,S=Object(O.g)();return Object(o.jsx)("div",{className:"create-driver",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={username:n,password:u,firstName:x,lastName:p},c=localStorage.getItem("authToken");j.a.post("/admin/driver",t,{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){return S("/admin/driver")})).catch((function(e){C(e.response.data.message)}))},children:[Object(o.jsxs)("label",{children:["Username",Object(o.jsx)("input",{type:"text",placeholder:"Username",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(o.jsxs)("label",{children:["Password",Object(o.jsx)("input",{type:"password",placeholder:"Password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(o.jsxs)("label",{children:["First name",Object(o.jsx)("input",{type:"text",placeholder:"First name",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(o.jsxs)("label",{children:["Last name",Object(o.jsx)("input",{type:"text",placeholder:"Last name",value:p,onChange:function(e){return f(e.target.value)}})]}),Object(o.jsx)("button",{children:"Submit"})]})})}function U(){return Object(o.jsx)("h1",{children:"Welcome Admin"})}function k(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(a.a)(s,2),u=i[0],b=i[1],d=Object(O.g)(),h=Object(c.useContext)(l),x=h.loginUser,g=h.setErrMessage;return Object(o.jsx)("div",{className:"driver-login",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={username:n,password:u};j.a.post("/login/driver",t).then((function(e){var t=e.data.authToken;x(t),d("/driver")})).catch((function(e){g(e.response.data.message)}))},children:[Object(o.jsxs)("label",{children:["Username",Object(o.jsx)("input",{type:"text",placeholder:"Username",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(o.jsxs)("label",{children:["Password",Object(o.jsx)("input",{type:"password",placeholder:"Password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(o.jsx)("button",{children:"Login"})]})})}function M(){var e=Object(c.useContext)(l).user,t=e.firstName,n=e.lastName;return Object(o.jsxs)("h1",{children:["Welcome ",t," ",n]})}function F(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(a.a)(s,2),u=i[0],b=i[1],d=Object(c.useState)(""),h=Object(a.a)(d,2),x=h[0],g=h[1],m=Object(c.useState)(""),v=Object(a.a)(m,2),p=v[0],f=v[1],C=Object(c.useState)(""),S=Object(a.a)(C,2),y=S[0],L=S[1],w=Object(c.useState)(""),I=Object(a.a)(w,2),T=I[0],N=I[1],P=Object(c.useState)(""),E=Object(a.a)(P,2),U=E[0],k=E[1],M=Object(c.useState)(""),F=Object(a.a)(M,2),D=F[0],A=F[1],B=Object(O.g)(),W=Object(c.useContext)(l).setErrMessage;return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:n,password:u,firstName:x,lastName:p,street:y,houseNumber:T,postcode:U,city:D};j.a.post("/signup/customer",t).then((function(e){return B("/customer/login")})).catch((function(e){return W(e.response.data.message)}))},children:[Object(o.jsxs)("label",{children:["Email",Object(o.jsx)("input",{type:"text",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Email"})]}),Object(o.jsxs)("label",{children:["Password",Object(o.jsx)("input",{type:"password",value:u,onChange:function(e){return b(e.target.value)},placeholder:"Password"})]}),Object(o.jsxs)("label",{children:["First name",Object(o.jsx)("input",{type:"text",value:x,onChange:function(e){return g(e.target.value)},placeholder:"First name"})]}),Object(o.jsxs)("label",{children:["Last name",Object(o.jsx)("input",{type:"text",value:p,onChange:function(e){return f(e.target.value)},placeholder:"Last name"})]}),Object(o.jsxs)("label",{children:["Address Street",Object(o.jsx)("input",{type:"text",value:y,onChange:function(e){return L(e.target.value)},placeholder:"Street"})]}),Object(o.jsxs)("label",{children:["House number",Object(o.jsx)("input",{type:"text",value:T,onChange:function(e){return N(e.target.value)},placeholder:"House Number"})]}),Object(o.jsxs)("label",{children:["Postcode",Object(o.jsx)("input",{type:"text",value:U,onChange:function(e){return k(e.target.value)},placeholder:"Postcode"})]}),Object(o.jsxs)("label",{children:["City",Object(o.jsx)("input",{type:"text",value:D,onChange:function(e){return A(e.target.value)},placeholder:"City"})]}),Object(o.jsx)("button",{children:"Sign up"})]})})}function D(){var e=Object(c.useContext)(l).user;return Object(o.jsxs)("h1",{children:["Welcome ",e.firstName," ",e.lastName]})}function A(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(""),i=Object(a.a)(s,2),u=i[0],b=i[1],d=Object(O.g)(),h=Object(c.useContext)(l),x=h.loginUser,g=h.setErrMessage;return Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"driver-login",children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:n,password:u};j.a.post("/login/customer",t).then((function(e){var t=e.data.authToken;x(t),d("/customer")})).catch((function(e){return g(e.response.data.message)}))},children:[Object(o.jsxs)("label",{children:["Email",Object(o.jsx)("input",{type:"text",placeholder:"Email",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(o.jsxs)("label",{children:["Password",Object(o.jsx)("input",{type:"password",placeholder:"Password",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(o.jsx)("button",{children:"Login"})]})})})}var B=function(){return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(y,{}),Object(o.jsxs)(O.d,{children:[Object(o.jsx)(O.b,{path:"/",element:Object(o.jsx)(N,{children:Object(o.jsx)(L,{})})}),Object(o.jsx)(O.b,{path:"/admin/login",element:Object(o.jsx)(N,{children:Object(o.jsx)(P,{})})}),Object(o.jsx)(O.b,{path:"/admin",element:Object(o.jsx)(w,{redirectTo:"/",children:Object(o.jsx)(U,{})})}),Object(o.jsx)(O.b,{path:"/admin/driver/create",element:Object(o.jsx)(w,{redirectTo:"/",children:Object(o.jsx)(E,{})})}),Object(o.jsx)(O.b,{path:"/driver/login",element:Object(o.jsx)(N,{children:Object(o.jsx)(k,{})})}),Object(o.jsx)(O.b,{path:"/driver",element:Object(o.jsx)(I,{redirectTo:"/",children:Object(o.jsx)(M,{})})}),Object(o.jsx)(O.b,{path:"/customer/signup",element:Object(o.jsx)(N,{children:Object(o.jsx)(F,{})})}),Object(o.jsx)(O.b,{path:"/customer/login",element:Object(o.jsx)(N,{children:Object(o.jsx)(A,{})})}),Object(o.jsx)(O.b,{path:"/customer",element:Object(o.jsx)(T,{redirectTo:"/",children:Object(o.jsx)(D,{})})})]}),Object(o.jsx)(d,{})]})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};n(99);s.a.render(Object(o.jsx)(b.a,{children:Object(o.jsx)(u,{children:Object(o.jsx)(B,{})})}),document.getElementById("root")),W()},73:function(e,t,n){},74:function(e,t,n){},94:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.ff8205a4.chunk.js.map